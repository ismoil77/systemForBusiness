<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞–º–∏</title>
		<link rel="stylesheet" href="./style.css" />
		<style>
			/* –°—Ç–∏–ª–∏ –¥–ª—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ */
			.login-overlay {
				position: fixed;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
				display: flex;
				justify-content: center;
				align-items: center;
				z-index: 10000;
			}

			.login-container {
				background: white;
				padding: 40px;
				border-radius: 16px;
				box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
				width: 100%;
				max-width: 400px;
				animation: slideUp 0.5s ease;
			}

			@keyframes slideUp {
				from {
					opacity: 0;
					transform: translateY(30px);
				}
				to {
					opacity: 1;
					transform: translateY(0);
				}
			}

			.login-container h1 {
				text-align: center;
				color: #333;
				margin-bottom: 10px;
				font-size: 28px;
			}

			.login-container p {
				text-align: center;
				color: #666;
				margin-bottom: 30px;
			}

			.login-form .form-group {
				margin-bottom: 20px;
			}

			.login-form label {
				display: block;
				margin-bottom: 8px;
				color: #333;
				font-weight: 500;
			}

			.login-form input {
				width: 100%;
				padding: 14px 16px;
				border: 2px solid #e0e0e0;
				border-radius: 8px;
				font-size: 16px;
				transition: border-color 0.3s, box-shadow 0.3s;
				box-sizing: border-box;
			}

			.login-form input:focus {
				outline: none;
				border-color: #667eea;
				box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
			}

			.login-btn {
				width: 100%;
				padding: 14px;
				background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
				color: white;
				border: none;
				border-radius: 8px;
				font-size: 16px;
				font-weight: 600;
				cursor: pointer;
				transition: transform 0.2s, box-shadow 0.2s;
			}

			.login-btn:hover {
				transform: translateY(-2px);
				box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
			}

			.login-btn:active {
				transform: translateY(0);
			}

			.login-btn:disabled {
				opacity: 0.7;
				cursor: not-allowed;
				transform: none;
			}

			.login-error {
				background: #ffe6e6;
				color: #d63031;
				padding: 12px;
				border-radius: 8px;
				margin-bottom: 20px;
				text-align: center;
				display: none;
			}

			.login-error.show {
				display: block;
				animation: shake 0.5s ease;
			}

			@keyframes shake {
				0%, 100% { transform: translateX(0); }
				25% { transform: translateX(-10px); }
				75% { transform: translateX(10px); }
			}

			.login-logo {
				text-align: center;
				margin-bottom: 20px;
			}

			.login-logo span {
				font-size: 60px;
			}

			.user-info {
				display: flex;
				align-items: center;
				gap: 10px;
				background: #f0f0f0;
				padding: 8px 15px;
				border-radius: 8px;
				margin-bottom: 10px;
			}

			.user-info span {
				font-weight: 500;
			}

			.logout-btn {
				background: #e74c3c;
				color: white;
				border: none;
				padding: 6px 12px;
				border-radius: 6px;
				cursor: pointer;
				font-size: 14px;
			}

			.logout-btn:hover {
				background: #c0392b;
			}

			/* –°–∫—Ä—ã–≤–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç –¥–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ */
			.main-content {
				display: none;
			}

			.main-content.authorized {
				display: block;
			}
		</style>
	</head>
	<body>
		<!-- –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π –¥–∏–∞–ª–æ–≥ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
		<div id="loginOverlay" class="login-overlay">
			<div class="login-container">
				<div class="login-logo">
					<span>üë§</span>
				</div>
				<h1>–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h1>
				<p>–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞–º–∏</p>
				
				<div id="loginError" class="login-error">
					–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å
				</div>
				
				<form id="loginForm" class="login-form">
					<div class="form-group">
						<label for="loginUsername">–õ–æ–≥–∏–Ω</label>
						<input 
							type="text" 
							id="loginUsername" 
							placeholder="–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω" 
							required 
							autocomplete="username"
						/>
					</div>
					<div class="form-group">
						<label for="loginPassword">–ü–∞—Ä–æ–ª—å</label>
						<input 
							type="password" 
							id="loginPassword" 
							placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" 
							required
							autocomplete="current-password"
						/>
					</div>
					<button type="submit" class="login-btn" id="loginBtn">
						–í–æ–π—Ç–∏
					</button>
				</form>
			</div>
		</div>

		<!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç (—Å–∫—Ä—ã—Ç –¥–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏) -->
		<div class="main-content" id="mainContent">
			<!-- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ -->
			<div id="offline-warning" class="offline-warning">
				–ù–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É. –§—É–Ω–∫—Ü–∏–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã.
			</div>

			<!-- –ü–æ–∏—Å–∫ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ -->
			<div class="container">
				<!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ -->
				<div class="user-info">
					<span>üë§ <span id="currentUserName">‚Äî</span></span>
					<button class="logout-btn" id="logoutBtn">–í—ã–π—Ç–∏</button>
				</div>

				<button class="btn" id="openActivityLog">üìí –ñ—É—Ä–Ω–∞–ª –¥–µ–π—Å—Ç–≤–∏–π</button>
				<a href="/report.html"><button class="btn">üìí –û—Ç—á—ë—Ç—ã</button></a>
				<select class="odam">
					<option value="Dilobar">Dilobar Qurbanova</option>
					<option value="Murodullo">Murodullo Mamatkulov</option>
					<option value="Dilangez">Dilangez Zhabborova</option>
				</select>
				<h1 class="dataToday"></h1>
				<input
					type="search"
					class="searchClient"
					placeholder="–ü–æ–∏—Å–∫ –∫–ª–∏–µ–Ω—Ç–∞..."
				/>
				<button class="addBtnClient btn info-btn">+ –î–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞</button>
				<button class="btn print-btn">üñ® –ü–µ—á–∞—Ç—å</button>
				<button class="btn btn-user-credit">üñ® –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Å—Ç–∞—Ç–æ–∫ –≤ —Ç–µ–ª–µ–≥—Ä–∞–º</button>
				<button class="btn info-btn" id="createInvoiceBtn">
					üìÑ –°–æ–∑–¥–∞—Ç—å –Ω–∞–∫–ª–∞–¥–Ω—É—é
				</button>
				<button class="btn info-btn" id="viewInvoicesBtn">
					üßæ –ú–æ–∏ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ
				</button>
				<button class="btn warning-btn" id="todayInvoicesBtn">
					üìã –°–µ–≥–æ–¥–Ω—è—à–Ω–∏–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ
				</button>
				<button class="btn info-btn" id="backupDataBtn">
					üîÑ –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
				</button>
				<button class="btn info-btn" id="manageZonesBtn">
					üìç –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–æ–Ω–∞–º–∏
				</button>
			</div>

			<!-- –¢–∞–±–ª–∏—Ü–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤ -->
			<table id="clients-table">
				<thead>
					<tr>
						<th>‚Ññ</th>
						<th>–ö–ª–∏–µ–Ω—Ç (–¢–µ–ª–µ—Ñ–æ–Ω)</th>
						<th class="allCredit">–î–æ–ª–≥</th>
						<th>–ú–µ—Å—Ç–æ</th>
						<th class="no-print">–î–µ–π—Å—Ç–≤–∏—è</th>
					</tr>
				</thead>
				<tbody class="box"></tbody>
			</table>

			<!-- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ -->
			<dialog class="editClientDialog">
				<button class="editClientDialogClose btn delete-btn">–ó–∞–∫—Ä—ã—Ç—å</button>
				<form class="editClientForm">
					<input type="text" name="client" placeholder="–ò–º—è –∫–ª–∏–µ–Ω—Ç–∞" required />
					<select name="place" required>
						<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Å—Ç–æ</option>
					</select>
					<input
						type="tel"
						name="phoneNumber"
						placeholder="–¢–µ–ª–µ—Ñ–æ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, +992991234567)"
						required
					/>
					<button type="submit" class="btn info-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
				</form>
			</dialog>

			<!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∏–µ–Ω—Ç–µ -->
			<dialog class="dialogInfo">
				<button class="dialogInfoClose btn delete-btn">–ó–∞–∫—Ä—ã—Ç—å</button><br />
				<div>
					<button class="btn print-btn print-client-history-btn">üñ® –ü–µ—á–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∫–ª–∏–µ–Ω—Ç–∞</button>
					<button class="btn print-btn send-telegram-client-history-btn">üñ® –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ —Ç–µ–ª–µ–≥—Ä–∞–º</button>
				</div>
				<label class="dataToday22"></label><br />
				<label class="placeInfo"></label><br />
				<label class="clientInfo"></label><br />
				<label class="creditInfo"></label><br />

				<input
					type="text"
					class="qarzNimaInfo form-input"
					placeholder="–ß—Ç–æ –∫—É–ø–∏–ª"
					required
				/>
				<input
					type="text"
					class="qarzNechiInfo form-input"
					placeholder="–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ (–ø—Ä–∏–º–µ—Ä: 12.50 –±–µ–∑ –∑–∞–ø—è—Ç–æ–π)"
					required
				/>
				<input
					type="text"
					class="qarzNarkhInfo form-input"
					placeholder="–Ω–∞—Ä—Ö–∏ (–ø—Ä–∏–º–µ—Ä: 12.50 –±–µ–∑ –∑–∞–ø—è—Ç–æ–π)"
					required
				/>
				<input type="date" class="addDolgDate form-input" />

				<button class="plusBtnInfo btn info-btn">–î–æ–±–∞–≤–∏—Ç—å –¥–æ–ª–≥</button>
				<br /><br /><br /><br /><br />

				<h1>–í—ã—Ä—É—á–∫–∞</h1>
				<br />
				<input
					type="number"
					class="minusInfo"
					placeholder="–°–ø–∏—Å–∞—Ç—å –¥–æ–ª–≥"
					min="0"
				/>
				<input type="date" class="spisatDolgDate" />
				<select class="sposobInfo" required>
					<option value="">–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</option>
					<option value="Dushanbe C–∏—Ç–∏">Dushanbe C–∏—Ç–∏</option>
					<option value="–ù–∞–ª–∏—á–∏ –ü—É–ª">–ù–ê–õ–ò–ß–ù–´–ô –ü–£–õ</option>
					<option value="Alif">ALIF MOBI</option>
					<option value="AMONAT">AMONAT BANK</option>
					<option value="–í–æ–∑–≤—Ä–∞—Ç">–í–æ–∑–≤—Ä–∞—Ç</option>
				</select>
				<button class="minusBtnInfo btn info-btn">–°–ø–∏—Å–∞—Ç—å</button><br />
				<label class="pulInfo"></label>
			</dialog>

			<!-- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ -->
			<dialog class="addDialog">
				<button class="addDialogClose btn delete-btn">–ó–∞–∫—Ä—ã—Ç—å</button>
				<form class="formAdd">
					<input type="text" name="client" placeholder="–ò–º—è –∫–ª–∏–µ–Ω—Ç–∞" required />
					<select name="place" required>
						<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Å—Ç–æ</option>
					</select>
					<input
						type="tel"
						name="phoneNumber"
						placeholder="–¢–µ–ª–µ—Ñ–æ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, +992991234567)"
						required
					/>
					<button type="submit" class="btn info-btn">–î–æ–±–∞–≤–∏—Ç—å</button>
				</form>
			</dialog>

			<!-- –ñ—É—Ä–Ω–∞–ª –¥–µ–π—Å—Ç–≤–∏–π -->
			<dialog id="activityLogDialog" class="activity-log-dialog">
				<button class="btn delete-btn" id="closeActivityLog">–ó–∞–∫—Ä—ã—Ç—å</button>
				<h2>–ñ—É—Ä–Ω–∞–ª –¥–µ–π—Å—Ç–≤–∏–π</h2>
				<div class="log-filters">
					<button class="btn info-btn" data-date="today">–°–µ–≥–æ–¥–Ω—è</button>
					<button class="btn info-btn" data-date="yesterday">–í—á–µ—Ä–∞</button>
					<button class="btn info-btn" data-date="all">–í—Å–µ</button>
					<input type="date" id="customLogDate" class="log-date-input" />
				</div>
				<div
					id="activityLogContent"
					style="margin-top: 15px; max-height: 400px; overflow-y: auto"
				></div>
			</dialog>

			<!-- –î–∏–∞–ª–æ–≥ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–∞–∫–ª–∞–¥–Ω–æ–π -->
			<dialog id="invoiceDialog" class="invoice-dialog">
				<button class="btn delete-btn" id="closeInvoiceDialog">–ó–∞–∫—Ä—ã—Ç—å</button>
				<h2>–°–æ–∑–¥–∞—Ç—å –Ω–∞–∫–ª–∞–¥–Ω—É—é</h2>
				<label>–ö–ª–∏–µ–Ω—Ç:</label>
				<select id="invoiceClient" required>
					<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–ª–∏–µ–Ω—Ç–∞</option>
				</select>
				<label>–î–∞—Ç–∞ –Ω–∞–∫–ª–∞–¥–Ω–æ–π:</label>
				<input type="date" id="invoiceDate" required />
				<div id="invoiceItems">
					<div class="invoice-item">
						<input
							type="text"
							class="item-name form-input"
							placeholder="–¢–æ–≤–∞—Ä"
							required
						/>
						<input
							type="number"
							class="item-qty form-input"
							placeholder="–ö–æ–ª-–≤–æ"
							min="1"
							value="1"
							required
						/>
						<input
							type="number"
							class="item-price form-input"
							placeholder="–¶–µ–Ω–∞"
							min="0"
							step="0.01"
							required
						/>
						<button type="button" class="btn delete-btn remove-item">
							–£–¥–∞–ª–∏—Ç—å
						</button>
					</div>
				</div>
				<button type="button" id="addItemBtn" class="btn info-btn">
					+ –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä
				</button>
				<div style="display: flex; gap: 10px; margin-top: 10px;">
					<button type="button" id="saveInvoiceBtn" class="btn info-btn">
						üíæ –¢–æ–ª—å–∫–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å
					</button>
					<button type="button" id="printSaveInvoiceBtn" class="btn warning-btn">
						üñ®üíæ –ü–µ—á–∞—Ç—å + –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
					</button>
					<button type="button" id="printDoubleSaveInvoiceBtn" class="btn warning-btn">
						üñ®üñ®üíæ –î–≤–æ–π–Ω–∞—è –ø–µ—á–∞—Ç—å + –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
					</button>
					<button type="button" id="sendInvoiceToTelegramBtn" class="btn info-btn">
						üì® –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ Telegram
					</button>
				</div>
				<div id="invoicePreview" style="margin-top: 20px; display: none">
					<h3>–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</h3>
					<div id="previewContent"></div>
				</div>
			</dialog>

			<!-- –î–∏–∞–ª–æ–≥ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö -->
			<dialog id="invoicesViewDialog" class="invoice-dialog">
				<button class="btn delete-btn" id="closeInvoicesView">–ó–∞–∫—Ä—ã—Ç—å</button>
				<h2>–°–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ</h2>
				<input
					type="text"
					id="invoiceSearch"
					placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–æ–º–µ—Ä—É, –∫–ª–∏–µ–Ω—Ç—É –∏–ª–∏ —Ç–æ–≤–∞—Ä—É..."
					class="form-input"
					style="margin-bottom: 15px; width: 100%"
				/>
				<div id="invoicesList"></div>
			</dialog>

			<!-- –î–∏–∞–ª–æ–≥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–æ–Ω–∞–º–∏ -->
			<dialog id="zonesDialog" class="zones-dialog">
				<button class="btn delete-btn" id="closeZonesDialog">–ó–∞–∫—Ä—ã—Ç—å</button>
				<h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–æ–Ω–∞–º–∏</h2>
				<form id="addZoneForm" style="margin-bottom: 20px;">
					<div style="display: flex; gap: 10px; margin-bottom: 10px;">
						<input 
							type="text" 
							id="newZoneName" 
							placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∑–æ–Ω—ã (–Ω–∞–ø—Ä: 102 –º–∏–∫—Ä–æ—Ä–∞–π–æ–Ω)" 
							required 
							class="form-input"
							style="flex-grow: 1;"
						/>
						<button type="submit" class="btn info-btn">+ –î–æ–±–∞–≤–∏—Ç—å</button>
					</div>
					<small style="color: #666; display: block; margin-top: 8px;">
						üí° –ó–Ω–∞—á–µ–Ω–∏–µ (value) –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–Ω–∞–ø—Ä: "102-–º–∏–∫—Ä–æ—Ä–∞–π–æ–Ω").
					</small>
				</form>
				<div id="zonesList" style="max-height: 400px; overflow-y: auto;"></div>
			</dialog>

			<!-- –î–∏–∞–ª–æ–≥ —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏—Ö –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö -->
			<dialog id="todayInvoicesDialog" class="invoice-dialog">
				<button class="btn delete-btn" id="closeTodayInvoices">–ó–∞–∫—Ä—ã—Ç—å</button>
				<h2>üìã –°–µ–≥–æ–¥–Ω—è—à–Ω–∏–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ</h2>
				<div style="margin-bottom: 15px; display: flex; gap: 10px;">
					<button class="btn info-btn" id="printAllTodayBtn">üñ® –ü–µ—á–∞—Ç—å –≤—Å–µ—Ö (–æ–¥–∏–Ω–∞—Ä–Ω–∞—è)</button>
					<button class="btn warning-btn" id="printAllTodayDoubleBtn">üñ®üñ® –ü–µ—á–∞—Ç—å –≤—Å–µ—Ö (–¥–≤–æ–π–Ω–∞—è)</button>
				</div>
				<div id="todayInvoicesList"></div>
			</dialog>

			<!-- –î–∏–∞–ª–æ–≥ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–π –Ω–∞–∫–ª–∞–¥–Ω–æ–π -->
			<dialog id="editTodayInvoiceDialog" class="invoice-dialog">
				<button class="btn delete-btn" onclick="this.closest('dialog').close()">–ó–∞–∫—Ä—ã—Ç—å</button>
				<h2>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–∫–ª–∞–¥–Ω—É—é</h2>
				<div id="editTodayItems"></div>
				<button type="button" class="btn info-btn" onclick="document.getElementById('editTodayItems').appendChild(createEditItemElement())">
					+ –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä
				</button>
				<button type="button" class="btn warning-btn" id="saveEditTodayInvoice">
					üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
				</button>
			</dialog>
		</div>

		<div id="loading-overlay" class="loading-overlay" style="display: none">
			<div class="spinner"></div>
			<p>–ó–∞–≥—Ä—É–∑–∫–∞...</p>
		</div>

		<!-- PDF –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
		
		<!-- –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–µ—Ä–µ–¥ main.js) -->
		<script>
			const AUTH_API_URL = 'https://7cf074eeac80e141.mokky.dev/users';

			// –ö–ª–∞—Å—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
			class AuthManager {
				constructor() {
					this.currentUser = null;
					this.init();
				}

				init() {
					// –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—É—é —Å–µ—Å—Å–∏—é
					const savedUser = sessionStorage.getItem('currentUser');
					if (savedUser) {
						this.currentUser = JSON.parse(savedUser);
						this.showMainContent();
					}

					this.setupEventListeners();
				}

				setupEventListeners() {
					// –§–æ—Ä–º–∞ –ª–æ–≥–∏–Ω–∞
					document.getElementById('loginForm').addEventListener('submit', (e) => {
						e.preventDefault();
						this.handleLogin();
					});

					// –ö–Ω–æ–ø–∫–∞ –≤—ã—Ö–æ–¥–∞
					document.getElementById('logoutBtn').addEventListener('click', () => {
						this.handleLogout();
					});
				}

				async handleLogin() {
					const username = document.getElementById('loginUsername').value.trim();
					const password1 = document.getElementById('loginPassword').value;
					const loginBtn = document.getElementById('loginBtn');
					const errorDiv = document.getElementById('loginError');

					// –°–∫—Ä—ã–≤–∞–µ–º –æ—à–∏–±–∫—É
					errorDiv.classList.remove('show');

					// –ë–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É
					loginBtn.disabled = true;
					loginBtn.textContent = '–í—Ö–æ–¥...';

					try {
						// –ü–æ–ª—É—á–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ API
						const response = await fetch(AUTH_API_URL);
						const users = await response.json();

						// –ò—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
						const user = users.find(u => 
							u.username === username && u.password1 === password1
						);

						if (user) {
							// –£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥
							this.currentUser = {
								id: user.id,
								username: user.username,
								password1: user.password1,
								name: user.name || user.username,
								role: user.role || 'user'
							};

							// –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
							sessionStorage.setItem('currentUser', JSON.stringify(this.currentUser));

							// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç
							this.showMainContent();
						} else {
							// –û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞
							errorDiv.textContent = '–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å';
							errorDiv.classList.add('show');
						}
					} catch (error) {
						console.error('–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:', error);
						errorDiv.textContent = '–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É';
						errorDiv.classList.add('show');
					} finally {
						loginBtn.disabled = false;
						loginBtn.textContent = '–í–æ–π—Ç–∏';
					}
				}

				handleLogout() {
					if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –≤—ã–π—Ç–∏?')) {
						this.currentUser = null;
						sessionStorage.removeItem('currentUser');
						this.showLoginScreen();
					}
				}

				showMainContent() {
					document.getElementById('loginOverlay').style.display = 'none';
					document.getElementById('mainContent').classList.add('authorized');
					
					// –û–±–Ω–æ–≤–ª—è–µ–º –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
					if (this.currentUser) {
						document.getElementById('currentUserName').textContent = this.currentUser.name;
					}
				}

				showLoginScreen() {
					document.getElementById('loginOverlay').style.display = 'flex';
					document.getElementById('mainContent').classList.remove('authorized');
					
					// –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É
					document.getElementById('loginUsername').value = '';
					document.getElementById('loginPassword').value = '';
					document.getElementById('loginError').classList.remove('show');
				}

				// –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
				getCurrentUser() {
					return this.currentUser;
				}

				// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
				isAuthenticated() {
					return this.currentUser !== null;
				}
			}

			// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
			const authManager = new AuthManager();

			// –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –¥—Ä—É–≥–∏—Ö —Å–∫—Ä–∏–ø—Ç–∞—Ö
			window.authManager = authManager;
		</script>
		
		<script type="module" src="./main.js"></script>
	</body>
</html>